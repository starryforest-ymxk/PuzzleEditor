# Bugfix: 点击 PuzzleNode 后黑屏

## 背景
- 问题：点击 PuzzleNode 期望进入状态机视图，但页面变黑（中心区域空白）。
- 触发：首次从空选中状态切换为 Stage / Node 选中时出现。

## 原因
- `Inspector` 组件在条件分支内调用 `useMemo`，切换选中类型时 Hook 调用顺序变化，React 抛出 Hook 顺序错误，导致渲染中断，中心画布呈现空白。

## 修复
- 将脚本/事件/演出图选项在组件顶部统一计算，移除条件 `useMemo` 调用。
- 可见变量改为直接计算，保证 Hook 顺序稳定，同时添加中文注释标记意图。

## 验证
- 启动应用后依次操作：选择 Stage -> 点击 PuzzleNode。
- 预期：中心显示状态机画布，Inspector 正常呈现节点信息，页面不再黑屏。
- 性能：计算量较小，去除 `useMemo` 不引入明显开销。

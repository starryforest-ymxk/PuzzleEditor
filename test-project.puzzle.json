{
    "fileType": "puzzle-project",
    "editorVersion": "1.0.0",
    "savedAt": "2024-12-19T00:00:00.000Z",
    "project": {
        "meta": {
            "id": "proj-demo",
            "name": "Demo Puzzle Project",
            "description": "Demo data for puzzle editor - comprehensive test project with all puzzle elements",
            "version": "0.0.1",
            "createdAt": "2024-12-19T00:00:00.000Z",
            "updatedAt": "2024-12-19T00:00:00.000Z"
        },
        "stageTree": {
            "rootId": "stage-root",
            "stages": {
                "stage-root": {
                    "id": "stage-root",
                    "name": "Root",
                    "parentId": null,
                    "childrenIds": [
                        "stage-act1",
                        "stage-act2",
                        "stage-act3"
                    ],
                    "eventListeners": [],
                    "localVariables": {},
                    "isExpanded": true
                },
                "stage-act1": {
                    "id": "stage-act1",
                    "name": "Act 1: Arrival",
                    "parentId": "stage-root",
                    "childrenIds": [
                        "stage-act1a",
                        "stage-act1b"
                    ],
                    "description": "Reach the underground facility entrance and regain bearings.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isInitial": true,
                    "isExpanded": true
                },
                "stage-act1a": {
                    "id": "stage-act1a",
                    "name": "Lab Wing",
                    "parentId": "stage-act1",
                    "childrenIds": [],
                    "description": "Stabilize power and recover lab notes.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isInitial": true,
                    "isExpanded": false
                },
                "stage-act1b": {
                    "id": "stage-act1b",
                    "name": "Security Wing",
                    "parentId": "stage-act1",
                    "childrenIds": [],
                    "description": "Disable security grid to access deeper halls.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isExpanded": false
                },
                "stage-act2": {
                    "id": "stage-act2",
                    "name": "Act 2: Investigation",
                    "parentId": "stage-root",
                    "childrenIds": [
                        "stage-act2a",
                        "stage-act2b",
                        "stage-act2c"
                    ],
                    "description": "Piece together the conspiracy from fragmented evidence.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isExpanded": true
                },
                "stage-act2a": {
                    "id": "stage-act2a",
                    "name": "Archive Stack",
                    "parentId": "stage-act2",
                    "childrenIds": [],
                    "description": "Unlock and parse stored case files.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isInitial": true,
                    "isExpanded": false
                },
                "stage-act2b": {
                    "id": "stage-act2b",
                    "name": "Server Corridor",
                    "parentId": "stage-act2",
                    "childrenIds": [],
                    "description": "Bypass digital defenses.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isExpanded": false
                },
                "stage-act2c": {
                    "id": "stage-act2c",
                    "name": "Interrogation Deck",
                    "parentId": "stage-act2",
                    "childrenIds": [],
                    "description": "Extract intel under pressure.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isExpanded": false
                },
                "stage-act3": {
                    "id": "stage-act3",
                    "name": "Act 3: Escape",
                    "parentId": "stage-root",
                    "childrenIds": [],
                    "description": "Sequence the final escape and seal the facility.",
                    "eventListeners": [],
                    "localVariables": {},
                    "isExpanded": false
                }
            }
        },
        "nodes": {
            "node-act1-main1": {
                "id": "node-act1-main1",
                "name": "Wake Up Call",
                "description": "Restore consciousness and gather the first clues.",
                "stageId": "stage-act1",
                "stateMachineId": "fsm-act1-main1",
                "localVariables": {
                    "node-act1-main1-progress": {
                        "id": "node-act1-main1-progress",
                        "name": "Progress",
                        "type": "integer",
                        "value": 0,
                        "state": "Implemented",
                        "scope": "NodeLocal"
                    },
                    "node-act1-main1-solved": {
                        "id": "node-act1-main1-solved",
                        "name": "Memory Stabilized",
                        "type": "boolean",
                        "value": false,
                        "state": "Draft",
                        "scope": "NodeLocal"
                    }
                },
                "eventListeners": []
            },
            "node-act1-main2": {
                "id": "node-act1-main2",
                "name": "Broken Elevator",
                "description": "Power up the service lift to descend.",
                "stageId": "stage-act1",
                "stateMachineId": "fsm-act1-main2",
                "localVariables": {
                    "node-act1-main2-progress": {
                        "id": "node-act1-main2-progress",
                        "name": "Progress",
                        "type": "integer",
                        "value": 0,
                        "state": "Implemented",
                        "scope": "NodeLocal"
                    },
                    "node-act1-main2-solved": {
                        "id": "node-act1-main2-solved",
                        "name": "Lift Online",
                        "type": "boolean",
                        "value": false,
                        "state": "Draft",
                        "scope": "NodeLocal"
                    }
                },
                "eventListeners": []
            },
            "node-act1a-1": {
                "id": "node-act1a-1",
                "name": "Fuse Hunt",
                "description": "Collect fuses to stabilize the lab power rails.",
                "stageId": "stage-act1a",
                "stateMachineId": "fsm-act1a-1",
                "localVariables": {
                    "node-act1a-1-progress": {
                        "id": "node-act1a-1-progress",
                        "name": "Fuses Inserted",
                        "type": "integer",
                        "value": 0,
                        "state": "Implemented",
                        "scope": "NodeLocal"
                    },
                    "node-act1a-1-solved": {
                        "id": "node-act1a-1-solved",
                        "name": "Power Stable",
                        "type": "boolean",
                        "value": false,
                        "state": "Implemented",
                        "scope": "NodeLocal"
                    }
                },
                "eventListeners": []
            },
            "node-act3-main1": {
                "id": "node-act3-main1",
                "name": "Escape Route",
                "description": "Plot the safest route to the roof.",
                "stageId": "stage-act3",
                "stateMachineId": "fsm-act3-main1",
                "localVariables": {
                    "node-act3-main1-progress": {
                        "id": "node-act3-main1-progress",
                        "name": "Paths Evaluated",
                        "type": "integer",
                        "value": 0,
                        "state": "Implemented",
                        "scope": "NodeLocal"
                    },
                    "node-act3-main1-solved": {
                        "id": "node-act3-main1-solved",
                        "name": "Route Locked",
                        "type": "boolean",
                        "value": false,
                        "state": "Implemented",
                        "scope": "NodeLocal"
                    }
                },
                "eventListeners": []
            }
        },
        "stateMachines": {
            "fsm-act1-main1": {
                "id": "fsm-act1-main1",
                "initialStateId": "fsm-act1-main1-state-idle",
                "states": {
                    "fsm-act1-main1-state-idle": {
                        "id": "fsm-act1-main1-state-idle",
                        "name": "Unsteady",
                        "description": "Waiting for the next clue.",
                        "position": {
                            "x": 120,
                            "y": 140
                        },
                        "eventListeners": []
                    },
                    "fsm-act1-main1-state-solving": {
                        "id": "fsm-act1-main1-state-solving",
                        "name": "Searching",
                        "description": "Player is interacting with the puzzle.",
                        "position": {
                            "x": 360,
                            "y": 140
                        },
                        "lifecycleScriptId": "script-lifecycle-state",
                        "eventListeners": []
                    },
                    "fsm-act1-main1-state-solved": {
                        "id": "fsm-act1-main1-state-solved",
                        "name": "Centered",
                        "description": "Puzzle completed.",
                        "position": {
                            "x": 600,
                            "y": 140
                        },
                        "lifecycleScriptId": "script-lifecycle-state",
                        "eventListeners": []
                    }
                },
                "transitions": {
                    "fsm-act1-main1-t-begin": {
                        "id": "fsm-act1-main1-t-begin",
                        "name": "Begin",
                        "fromStateId": "fsm-act1-main1-state-idle",
                        "toStateId": "fsm-act1-main1-state-solving",
                        "priority": 1,
                        "triggers": [
                            {
                                "type": "OnEvent",
                                "eventId": "event-case-start"
                            }
                        ],
                        "parameterModifiers": [],
                        "condition": {
                            "type": "LITERAL",
                            "value": true
                        }
                    },
                    "fsm-act1-main1-t-complete": {
                        "id": "fsm-act1-main1-t-complete",
                        "name": "Complete",
                        "fromStateId": "fsm-act1-main1-state-solving",
                        "toStateId": "fsm-act1-main1-state-solved",
                        "priority": 1,
                        "triggers": [
                            {
                                "type": "Always"
                            }
                        ],
                        "parameterModifiers": [],
                        "condition": {
                            "type": "COMPARISON",
                            "operator": ">=",
                            "left": {
                                "type": "VARIABLE_REF",
                                "variableId": "node-act1-main1-progress",
                                "variableScope": "NodeLocal"
                            },
                            "right": {
                                "type": "LITERAL",
                                "value": 1
                            }
                        }
                    }
                }
            },
            "fsm-act1-main2": {
                "id": "fsm-act1-main2",
                "initialStateId": "fsm-act1-main2-state-idle",
                "states": {
                    "fsm-act1-main2-state-idle": {
                        "id": "fsm-act1-main2-state-idle",
                        "name": "Offline",
                        "description": "Waiting for the next clue.",
                        "position": {
                            "x": 120,
                            "y": 140
                        },
                        "eventListeners": []
                    },
                    "fsm-act1-main2-state-solving": {
                        "id": "fsm-act1-main2-state-solving",
                        "name": "Rewiring",
                        "description": "Player is interacting with the puzzle.",
                        "position": {
                            "x": 360,
                            "y": 140
                        },
                        "eventListeners": []
                    },
                    "fsm-act1-main2-state-solved": {
                        "id": "fsm-act1-main2-state-solved",
                        "name": "Powered",
                        "description": "Puzzle completed.",
                        "position": {
                            "x": 600,
                            "y": 140
                        },
                        "eventListeners": []
                    }
                },
                "transitions": {}
            },
            "fsm-act1a-1": {
                "id": "fsm-act1a-1",
                "initialStateId": "fsm-act1a-1-state-idle",
                "states": {
                    "fsm-act1a-1-state-idle": {
                        "id": "fsm-act1a-1-state-idle",
                        "name": "Dark",
                        "description": "Waiting for the next clue.",
                        "position": {
                            "x": 120,
                            "y": 140
                        },
                        "eventListeners": []
                    },
                    "fsm-act1a-1-state-solving": {
                        "id": "fsm-act1a-1-state-solving",
                        "name": "Slotting",
                        "description": "Player is interacting with the puzzle.",
                        "position": {
                            "x": 360,
                            "y": 140
                        },
                        "eventListeners": []
                    },
                    "fsm-act1a-1-state-solved": {
                        "id": "fsm-act1a-1-state-solved",
                        "name": "Stabilized",
                        "description": "Puzzle completed.",
                        "position": {
                            "x": 600,
                            "y": 140
                        },
                        "eventListeners": []
                    }
                },
                "transitions": {}
            },
            "fsm-act3-main1": {
                "id": "fsm-act3-main1",
                "initialStateId": "fsm-act3-main1-state-idle",
                "states": {
                    "fsm-act3-main1-state-idle": {
                        "id": "fsm-act3-main1-state-idle",
                        "name": "Scouting",
                        "description": "Waiting for the next clue.",
                        "position": {
                            "x": 120,
                            "y": 140
                        },
                        "eventListeners": []
                    },
                    "fsm-act3-main1-state-solving": {
                        "id": "fsm-act3-main1-state-solving",
                        "name": "Planning",
                        "description": "Player is interacting with the puzzle.",
                        "position": {
                            "x": 360,
                            "y": 140
                        },
                        "eventListeners": []
                    },
                    "fsm-act3-main1-state-solved": {
                        "id": "fsm-act3-main1-state-solved",
                        "name": "Route Locked",
                        "description": "Puzzle completed.",
                        "position": {
                            "x": 600,
                            "y": 140
                        },
                        "eventListeners": []
                    }
                },
                "transitions": {}
            }
        },
        "presentationGraphs": {
            "pres-escape": {
                "id": "pres-escape",
                "name": "Escape Countdown",
                "description": "Final countdown cinematic when the last door opens.",
                "startNodeId": "pnode-escape-01",
                "nodes": {
                    "pnode-escape-01": {
                        "id": "pnode-escape-01",
                        "name": "Alarm Wail",
                        "type": "ScriptCall",
                        "position": {
                            "x": 80,
                            "y": 100
                        },
                        "presentation": {
                            "type": "Script",
                            "scriptId": "script-log",
                            "parameters": [
                                {
                                    "paramName": "message",
                                    "source": {
                                        "type": "Constant",
                                        "value": "Evacuation protocol triggered."
                                    }
                                }
                            ]
                        },
                        "nextIds": [
                            "pnode-escape-02"
                        ]
                    },
                    "pnode-escape-02": {
                        "id": "pnode-escape-02",
                        "name": "Timer Overlay",
                        "type": "ScriptCall",
                        "position": {
                            "x": 320,
                            "y": 100
                        },
                        "presentation": {
                            "type": "Script",
                            "scriptId": "script-play-anim",
                            "parameters": [
                                {
                                    "paramName": "target",
                                    "source": {
                                        "type": "Constant",
                                        "value": "UI_Timer"
                                    }
                                },
                                {
                                    "paramName": "animName",
                                    "source": {
                                        "type": "Constant",
                                        "value": "Countdown"
                                    }
                                }
                            ]
                        },
                        "nextIds": [
                            "pnode-escape-03"
                        ]
                    },
                    "pnode-escape-03": {
                        "id": "pnode-escape-03",
                        "name": "Roof Door Open",
                        "type": "ScriptCall",
                        "position": {
                            "x": 560,
                            "y": 100
                        },
                        "presentation": {
                            "type": "Script",
                            "scriptId": "script-dialogue",
                            "parameters": [
                                {
                                    "paramName": "message",
                                    "source": {
                                        "type": "Constant",
                                        "value": "Final door unlocked. Move!"
                                    }
                                }
                            ]
                        },
                        "nextIds": []
                    }
                }
            }
        },
        "blackboard": {
            "globalVariables": {
                "var-game-difficulty": {
                    "id": "var-game-difficulty",
                    "name": "Game Difficulty",
                    "type": "string",
                    "value": "Normal",
                    "state": "Implemented",
                    "scope": "Global"
                },
                "var-player-health": {
                    "id": "var-player-health",
                    "name": "Player Health",
                    "type": "integer",
                    "value": 100,
                    "state": "Draft",
                    "scope": "Global"
                }
            },
            "events": {
                "event-alarm-triggered": {
                    "id": "event-alarm-triggered",
                    "name": "Alarm Triggered",
                    "description": "Guard alarm raised",
                    "state": "Implemented"
                },
                "event-power-restored": {
                    "id": "event-power-restored",
                    "name": "Power Restored",
                    "description": "Generator back online",
                    "state": "Draft"
                },
                "event-case-start": {
                    "id": "event-case-start",
                    "name": "Case Start",
                    "description": "Signals the beginning of any puzzle interaction.",
                    "state": "Implemented"
                }
            }
        },
        "scripts": {
            "version": "1.0.0",
            "scripts": {
                "script-log": {
                    "id": "script-log",
                    "name": "Debug Log",
                    "category": "Performance",
                    "description": "Print a message to the console",
                    "state": "Implemented"
                },
                "script-play-anim": {
                    "id": "script-play-anim",
                    "name": "Play Animation",
                    "category": "Performance",
                    "description": "Play an animation on a target object",
                    "state": "Implemented"
                },
                "script-dialogue": {
                    "id": "script-dialogue",
                    "name": "Show Dialogue",
                    "category": "Performance",
                    "description": "Display a dialogue message",
                    "state": "Implemented"
                },
                "script-lifecycle-node": {
                    "id": "script-lifecycle-node",
                    "name": "Node Lifecycle",
                    "category": "Lifecycle",
                    "description": "Handles node enter/exit lifecycle events",
                    "lifecycleType": "Node",
                    "state": "Implemented"
                },
                "script-lifecycle-state": {
                    "id": "script-lifecycle-state",
                    "name": "State Lifecycle",
                    "category": "Lifecycle",
                    "description": "Handles state enter/exit lifecycle events",
                    "lifecycleType": "State",
                    "state": "Implemented"
                },
                "script-lifecycle-stage": {
                    "id": "script-lifecycle-stage",
                    "name": "Stage Lifecycle",
                    "category": "Lifecycle",
                    "description": "Handles stage-level enter/exit hooks",
                    "lifecycleType": "Stage",
                    "state": "Implemented"
                }
            }
        },
        "triggers": {
            "triggers": {
                "ON_INTERACT": {
                    "id": "ON_INTERACT",
                    "name": "On Interact",
                    "description": "Player interacts with the object",
                    "state": "Implemented"
                },
                "ON_ENTER_REGION": {
                    "id": "ON_ENTER_REGION",
                    "name": "On Enter Region",
                    "description": "Player enters the trigger volume",
                    "state": "Implemented"
                },
                "ON_VARIABLE_CHANGE": {
                    "id": "ON_VARIABLE_CHANGE",
                    "name": "On Variable Change",
                    "description": "A specific blackboard variable changed",
                    "state": "Implemented"
                }
            }
        }
    },
    "editorState": {
        "panelSizes": {},
        "stageExpanded": {
            "stage-root": true,
            "stage-act1": true,
            "stage-act2": true
        },
        "currentStageId": "stage-root",
        "currentNodeId": null,
        "currentGraphId": null,
        "view": "FSM"
    }
}